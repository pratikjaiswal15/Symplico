
<ion-header>
    
    

  <ion-toolbar color="primary" >

    <ion-buttons slot ="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>

    <ion-fab vertical="top" horizontal="end" slot="end">
        <ion-fab-button (click)="openCart()" #cart>
          <div class="cart-length">{{ count  }}</div> 
          <ion-icon name="cart" class="cart-icon"></ion-icon>
        </ion-fab-button>
      </ion-fab>
    
    <ion-title>
      Ionic Shopping
    </ion-title>


  </ion-toolbar>

</ion-header>
 
<ion-content>

    <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
      <ion-refresher-content></ion-refresher-content>
    </ion-refresher>


<br>

  <ion-list>
    
    
      
      <ion-card *ngFor="let p of products">

        <ion-item>

      <ion-row>     
      

        <ion-col size ="5">
            <ion-img class="img" [src]='p.image_url'></ion-img>
        </ion-col>

        <ion-col size ="7">
        <ion-row>
          <ion-label> {{p.name}} </ion-label>
        </ion-row>
        <ion-row>       
            <p>{{p.description}}</p>
        </ion-row>

         <ion-row>

          <ion-item lines="none">
            <ion-label>Qty  </ion-label>  
            <ion-select style="max-width:50%;" (ionChange)="onChange($event.target.value, p, p.stocks)" interface="popover" value= 1  > 
              <ion-select-option  *ngFor ="let q of quantity"   >{{q}}</ion-select-option>
            </ion-select>    
            {{p.unit}}

          </ion-item>

          </ion-row>

      

        <ion-row> 
            
            <ion-col size="6">
              <ion-label color="secondary"> 
                
                <b>  {{ p.productPrices.fair_price + p.productPrices.fluctuated_price | currency:'INR' }} </b>
              </ion-label>
            </ion-col>
          
              <ion-col class="ion-text-right">
               
                <ion-button color="success" [disabled] = "p.disabled" (click)="addToCart(p, p.productPrices.fair_price + p.productPrices.fluctuated_price )">
                  <ion-icon slot="end" name="cart-outline"></ion-icon>
                
                </ion-button>
              </ion-col>

           </ion-row> 
          
            <ion-row>
              <div *ngIf="p.disabled">
                <ion-label color="tertiary">Out of stock</ion-label>
              </div>
            </ion-row>
          
        </ion-col>

      </ion-row>
    </ion-item>

    </ion-card>
  </ion-list>


  

</ion-content>





<!---
<ion-card-header>
        <ion-card-title>{{ p.name }}</ion-card-title>
      </ion-card-header>
        
      <ion-card-content>
        <ion-row class="ion-align-items-center">
          <ion-col size="2">
            <ion-label color="secondary">
              <b>{{ 2 | currency:'INR' }}</b>
            </ion-label>
          </ion-col>

          <ion-col size="4">

          <ion-item>
            <ion-label>Qnt</ion-label>
            <ion-select placeholder="Select One">
              <ion-select-option value="f">1</ion-select-option>
              <ion-select-option value="m">2</ion-select-option>
            </ion-select>
          </ion-item>
        </ion-col>

          <ion-col size="4" class="ion-text-right">
            <ion-button fill="clear" (click)="addToCart(p)">
              <ion-icon name="add"></ion-icon>
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-card-content>
    -->


    <!---
      <ion-card-header>
          <ion-card-title class="title">{{ p.name }}</ion-card-title>
      </ion-card-header>

    <ion-card-content>

      <ion-col size=2 >
          <ion-img class="img" [src]='p.image_url'></ion-img>
      </ion-col>

        <ion-col size="2">
            <ion-label color="secondary">
              <b>{{ 2 | currency:'INR' }}</b>
            </ion-label>
          </ion-col>      
  

    </ion-card-content>
-->